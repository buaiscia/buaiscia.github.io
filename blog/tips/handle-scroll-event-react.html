<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="next-head-count" content="3"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/7288f585d6b9ed7d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7288f585d6b9ed7d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a5b8b3492b8ffdaf.js" defer=""></script><script src="/_next/static/chunks/main-18f19bd0d7626768.js" defer=""></script><script src="/_next/static/chunks/pages/_app-df5b2c069e00255c.js" defer=""></script><script src="/_next/static/chunks/675-068a97b608212520.js" defer=""></script><script src="/_next/static/chunks/410-e667578e06161e97.js" defer=""></script><script src="/_next/static/chunks/712-870525155e7082cc.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/CYIFeGlkrWZFIouqGR1pk/_buildManifest.js" defer=""></script><script src="/_next/static/CYIFeGlkrWZFIouqGR1pk/_ssgManifest.js" defer=""></script><script src="/_next/static/CYIFeGlkrWZFIouqGR1pk/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Alex Buaiscia Tech Blog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-3 -2.75 6.5 6" xml:space="preserve"><path class="logo_svg__path" fill="none" stroke="#0EA5E9" stroke-width="0.1" stroke-miterlimit="10" d="M0 0c.043 0 .082-.035.088-.088C.095-.145.064-.209 0-.25a.29.29 0 0 0-.265-.015A.42.42 0 0 0-.5 0a.547.547 0 0 0 .058.442c.091.153.25.267.442.308A.8.8 0 0 0 .619.619C.819.48.959.258 1 0a1.05 1.05 0 0 0-.205-.795A1.171 1.171 0 0 0 0-1.25a1.305 1.305 0 0 0-.972.278A1.428 1.428 0 0 0-1.5 0c-.043.406.081.821.351 1.149.28.341.693.56 1.149.601a1.81 1.81 0 0 0 1.326-.424C1.713.999 1.958.522 2 0a2.06 2.06 0 0 0-.497-1.503A2.186 2.186 0 0 0 0-2.25a2.302 2.302 0 0 0-1.679.571A2.43 2.43 0 0 0-2.5 0c-.043.671.187 1.34.644 1.856A2.686 2.686 0 0 0 0 2.75a2.807 2.807 0 0 0 2.033-.717A2.934 2.934 0 0 0 3 0"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Alex Buaiscia Tech Blog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/highlights">Public highlights</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">Who&#x27;s me</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/highlights">Public highlights</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">Who&#x27;s me</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mt-24 text-center"><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Under Construction<!-- --> <span role="img" aria-label="roadwork sign">ðŸš§</span></h1></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/buaiscia"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/alex-buaiscia/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/AlexBuaiscia"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-6 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Alex Buaiscia</div><div> â€¢ </div><div>Â© 2023</div><div> â€¢ </div><a href="/">Alex Buaiscia Blog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var h=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var s=t=\u003ec(t,\"__esModule\",{value:!0});var g=(t,e)=\u003e()=\u003e(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=\u003e{s(t);for(var o in e)c(t,o,{get:e[o],enumerable:!0})},w=(t,e,o)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!p.call(t,i)\u0026\u0026i!==\"default\"\u0026\u0026c(t,i,{get:()=\u003ee[i],enumerable:!(o=d(e,i))||o.enumerable});return t},v=t=\u003ew(s(c(t!=null?h(m(t)):{},\"default\",t\u0026\u0026t.__esModule\u0026\u0026\"default\"in t?{get:()=\u003et.default,enumerable:!0}:{value:t,enumerable:!0})),t);var l=g((T,r)=\u003e{r.exports=_jsx_runtime});var I={};f(I,{default:()=\u003eS,frontmatter:()=\u003ey});var n=v(l()),y={title:\"How to Handle Scroll Events in React\",date:\"2023-10-22\",draft:!0,tags:[\"web development\",\"react\"],summary:\"Mastering Smooth Scroll Events in React: A Guide to Debouncing and Dynamic Navigation\"};function a(t){let e=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",pre:\"pre\",code:\"code\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this blog post, we\\u2019ll explore how to handle scroll events in a React application. We\\u2019ll focus on an issue developers could face: synchronizing state with the scroll position.\"}),`\n`,(0,n.jsx)(e.h2,{children:\"The Problem\"}),`\n`,(0,n.jsx)(e.p,{children:\"Imagine you\\u2019re building a complex UI with multiple sections, and you want to highlight the navigation link of the section currently visible in the viewport. Not only that, you would like to be able to click on the sections and scroll on the corresponding one. You might think of using a scroll event listener that checks the scroll position and updates the state accordingly.\"}),`\n`,(0,n.jsxs)(e.p,{children:[`However, you may encounter an issue where your state updates continuously, causing unnecessary re-renders and performance issues.\nUnfortunately, the only browser API for it, called `,(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document/scrollend_event\",children:\"scrollend event\"}),\", is not compatible and implemented in Safari, nor in iOS, Samsung or Opera browsers, so it can't be really used on large scale.\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"The Solution: Debouncing\"}),`\n`,(0,n.jsx)(e.p,{children:\"To solve this problem, we can use a technique called debouncing. Debouncing is a programming practice used to ensure that time-consuming tasks do not fire so often. This can be particularly useful for rate limiting execution of handlers on events that will trigger requests.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s how you could implement a debounce function in TypeScript, in a very abstract method:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`function debounce(func: (...args: any[]) =\u003e void, wait: number) {\n  let timeout: NodeJS.Timeout;\n  return function executedFunction(...args: any[]) {\n    const later = () =\u003e {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"This debounce function takes two arguments: func, the function you want to debounce, and wait, the number of milliseconds to delay before executing the function.\"}),`\n`,(0,n.jsx)(e.h2,{children:\"Checking if an Element is in the Viewport\"}),`\n`,(0,n.jsx)(e.p,{children:\"To determine which section is currently visible in the viewport, we can use a helper function:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`function isElementInViewport(el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  return (\n    rect.top \u003e= 0 \u0026\u0026\n    rect.left \u003e= 0 \u0026\u0026\n    rect.bottom \u003c= (window.innerHeight || document.documentElement.clientHeight) \u0026\u0026\n    rect.right \u003c= (window.innerWidth || document.documentElement.clientWidth)\n  )\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This function takes a DOM element as an argument and uses the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\",children:\"getBoundingClientRect\"}),\" method to get its position relative to the viewport. It then checks if the entire element (from top to bottom and left to right) is within the viewport dimensions. If it is, the function returns true; otherwise, it returns false.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"We can use this function in our scroll event listener to check if each section is in the viewport and update our selected state accordingly.\"}),`\n`,(0,n.jsx)(e.p,{children:\"By combining these techniques, we can create a dynamic navigation system that responds to both user interactions and scroll events, providing a smooth and intuitive user experience.\"}),`\n`,(0,n.jsx)(e.h2,{children:\"Applying Debouncing to Scroll Event Listener\"}),`\n`,(0,n.jsx)(e.p,{children:\"We can apply our debounce function to the scroll event listener in our React component:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`useEffect(() =\u003e {\n  const handleScroll = debounce(() =\u003e {\n    if (!isScrolling) {\n      const sections = document.querySelectorAll('.section')\n      sections.forEach(section =\u003e {\n        if (isElementInViewport(section as HTMLElement)) {\n          setSelected(() =\u003e section.id)\n        }\n      })\n    }\n  }, 500); // Adjust this value as needed\n\n  window.addEventListener('scroll', handleScroll);\n\n  return () =\u003e {\n    window.removeEventListener('scroll', handleScroll);\n  };\n}, [isScrolling]);\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"In this code snippet, we\\u2019re adding a scroll event listener that fires our debounced function. This function checks if we\\u2019re currently scrolling and if not, it checks each section (through a class name to be applied) to see if it\\u2019s in the viewport. If it is, it sets the selected state to the ID of that section.\"}),`\n`,(0,n.jsx)(e.p,{children:\"By using debouncing, we ensure that our event handler doesn\\u2019t fire too often and cause performance issues. Instead, it waits until a certain amount of time has passed without the event being fired before executing.\"}),`\n`,(0,n.jsx)(e.h2,{children:\"Handling Click Events\"}),`\n`,(0,n.jsx)(e.p,{children:\"In our React component, we may want to handle click events that trigger scrolling to a specific section. Here\\u2019s how we can do it:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`const handleOnClick = async (value: any) =\u003e {\n  setIsScrolling(true)\n\n  const element = document.getElementById(value)\n\n  if (element) {\n    element.scrollIntoView({behavior: 'smooth'})\n\n    setTimeout(() =\u003e {\n      setIsScrolling(false)\n      setSelected(() =\u003e value)\n    }, 500)\n  }\n}\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"In this function, we\\u2019re first setting isScrolling to true. Then, we\\u2019re getting the DOM element with the ID equal to the clicked value. If such an element exists, we\\u2019re using the scrollIntoView method to smoothly scroll to that element.\"}),`\n`,(0,n.jsx)(e.p,{children:\"After a timeout of 500ms (to allow for the scrolling animation to finish), we\\u2019re setting isScrolling back to false and updating our selected state to the ID of the clicked section.\"}),`\n`,(0,n.jsx)(e.h2,{children:\"Simplifying debouncing\"}),`\n`,(0,n.jsx)(e.p,{children:\"It is even possible to use directly the setTimeout browser API directly, instead of making a function about debouncing. The effect, pardon the pun, will be the same, but the code simpler, if you don't need to reuse it. Otherwise, the debounce function, or even import lodash debounce, will do.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`useEffect(() =\u003e {\n  let timeout: NodeJS.Timeout\n  \n  const handleScroll = () =\u003e {\n    if (timeout) {\n      clearTimeout(timeout)\n    }\n\n    timeout = setTimeout(() =\u003e {\n      if (!isScrolling) {\n        const sections = document.querySelectorAll('.section')\n        sections.forEach(section =\u003e {\n          if (isElementInViewport(section as HTMLElement)) {\n            setSelected(() =\u003e section.id)\n          }\n        })\n      }\n    }, 100) // set to what is your need; can be lower than the handle on click for it doesn't need too much waiting\n  }\n\n  window.addEventListener('scroll', handleScroll);\n\n  return () =\u003e {\n    window.removeEventListener('scroll', handleScroll);\n  };\n}, [isScrolling]);\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"Conclusion\"}),`\n`,(0,n.jsx)(e.p,{children:`Handling scroll events in React can be tricky due to the asynchronous nature of JavaScript and the way React batches state updates. However, with techniques like debouncing, we can efficiently handle these events and create smooth, responsive user interfaces.\nWhen we have to use two different listeners to make actions on our DOM, they can interfere with each other. That's why we need to create some workaround to wait for the changes to happen.`}),`\n`,(0,n.jsx)(e.p,{children:`Remember to always remove event listeners when they\\u2019re no longer needed to prevent memory leaks and potential performance issues.\nIf you have other ways of handling scroll events in such cases, please share it!`})]})}function b(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(a,t)})):a(t)}var S=b;return I;})();\n;return Component;","toc":[],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.03,"time":301800,"words":1006},"slug":"tips/handle-scroll-event-react","fileName":"tips/handle-scroll-event-react.md","title":"How to Handle Scroll Events in React","date":"2023-10-22T00:00:00.000Z","draft":true,"tags":["web development","react"],"summary":"Mastering Smooth Scroll Events in React: A Guide to Debouncing and Dynamic Navigation"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.865,"time":51900,"words":173},"slug":["default"],"fileName":"default.md","name":"Alex Buaiscia","avatar":"/static/images/avatar.png","occupation":"Full-stack Software Developer","company":"Atlas Copco","twitter":"https://twitter.com/AlexBuaiscia","linkedin":"https://www.linkedin.com/in/alex-buaiscia/","github":"https://github.com/buaiscia","date":null}],"prev":{"title":"Types Compatibility issues between Jest and Vitest using React Testing Library and their fix","date":"2023-05-29T00:00:00.000Z","draft":false,"tags":["web development","jest","react-testing-library"],"summary":"Addressing Jest-Vitest Conflict: Fixing Global Type Identifier Errors and Optimizing Build Workflow","slug":"tips/types-issue-jest-vitest"},"next":null},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["tips","handle-scroll-event-react"]},"buildId":"CYIFeGlkrWZFIouqGR1pk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
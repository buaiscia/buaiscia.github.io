<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Epic React. Hooks. UseState, useEffect. What I&#x27;m learning.</title><meta name="robots" content="follow, index"/><meta name="description" content="A guide of what I&#x27;m learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect"/><meta property="og:url" content="https://buaiscia.github.io/blog/epic-react/learning-on-epic-react-hooks-useState-useEffect"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Alex Buaiscia Blog"/><meta property="og:description" content="A guide of what I&#x27;m learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect"/><meta property="og:title" content="Epic React. Hooks. UseState, useEffect. What I&#x27;m learning."/><meta property="og:image" content="https://buaiscia.github.io/static/images/javascript-language.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/AlexBuaiscia"/><meta name="twitter:title" content="Epic React. Hooks. UseState, useEffect. What I&#x27;m learning."/><meta name="twitter:description" content="A guide of what I&#x27;m learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect"/><meta name="twitter:image" content="https://buaiscia.github.io/static/images/javascript-language.png"/><link rel="canonical" href="https://buaiscia.github.io/blog/epic-react/learning-on-epic-react-hooks-useState-useEffect"/><meta property="article:published_time" content="2021-11-01T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://buaiscia.github.io/blog/epic-react/learning-on-epic-react-hooks-useState-useEffect"
  },
  "headline": "Epic React. Hooks. UseState, useEffect. What I'm learning.",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://buaiscia.github.io/static/images/javascript-language.png"
    }
  ],
  "datePublished": "2021-11-01T00:00:00.000Z",
  "dateModified": "2021-11-01T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Alex Buaiscia"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Alex Buaiscia",
    "logo": {
      "@type": "ImageObject",
      "url": "https://buaiscia.github.io"
    }
  },
  "description": "A guide of what I'm learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect"
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/7288f585d6b9ed7d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7288f585d6b9ed7d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a5b8b3492b8ffdaf.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0a44b73e58ab4cb8.js" defer=""></script><script src="/_next/static/chunks/675-4efee9c9b489918b.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-870525155e7082cc.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/XStNGs_bMW2Rssr3AyI-b/_buildManifest.js" defer=""></script><script src="/_next/static/XStNGs_bMW2Rssr3AyI-b/_ssgManifest.js" defer=""></script><script src="/_next/static/XStNGs_bMW2Rssr3AyI-b/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Alex Buaiscia Tech Blog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-3 -2.75 6.5 6" xml:space="preserve"><path class="logo_svg__path" fill="none" stroke="#0EA5E9" stroke-width="0.1" stroke-miterlimit="10" d="M0 0c.043 0 .082-.035.088-.088C.095-.145.064-.209 0-.25a.29.29 0 0 0-.265-.015A.42.42 0 0 0-.5 0a.547.547 0 0 0 .058.442c.091.153.25.267.442.308A.8.8 0 0 0 .619.619C.819.48.959.258 1 0a1.05 1.05 0 0 0-.205-.795A1.171 1.171 0 0 0 0-1.25a1.305 1.305 0 0 0-.972.278A1.428 1.428 0 0 0-1.5 0c-.043.406.081.821.351 1.149.28.341.693.56 1.149.601a1.81 1.81 0 0 0 1.326-.424C1.713.999 1.958.522 2 0a2.06 2.06 0 0 0-.497-1.503A2.186 2.186 0 0 0 0-2.25a2.302 2.302 0 0 0-1.679.571A2.43 2.43 0 0 0-2.5 0c-.043.671.187 1.34.644 1.856A2.686 2.686 0 0 0 0 2.75a2.807 2.807 0 0 0 2.033-.717A2.934 2.934 0 0 0 3 0"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Alex Buaiscia Tech Blog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">Who&#x27;s me</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">Who&#x27;s me</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2021-11-01T00:00:00.000Z">Monday, November 1, 2021</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Epic React. Hooks. UseState, useEffect. What I&#x27;m learning.</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="/static/images/avatar.png?imwidth=48 1x, /static/images/avatar.png?imwidth=96 2x" src="/static/images/avatar.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Alex Buaiscia</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/AlexBuaiscia" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@AlexBuaiscia</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><ul><li><a href="#back-into-epic-react">Back into Epic React</a></li><li><a href="#1---usestate">1 - useState</a></li><li><a href="#2---useeffect">2 - useEffect</a></li><li><a href="#other-notes">Other notes</a></li></ul><h2 id="back-into-epic-react"><a href="#back-into-epic-react" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Back into Epic React</h2><p>After a long break and quite more experience, I managed to get back to EpicReact. This is the second chapter of the series. Here&#x27;s the link to the first one:</p><p><a target="_blank" rel="noopener noreferrer" href="https://buaiscia.github.io/blog/learning-on-epic-react-fundamentals">Epic React. Fundamentals. What I&#x27;m learning.</a></p><p>As in the other post, this isn&#x27;t a guide to React nor to EpicReact. They are just my notes, thoughts and learning on the course workshops. Few things can appear as confusing for lack of context. However, I hope you can find some interesting points to reflect upon. Repositories and solutions are anyway publicly available on Kent&#x27;s Github.</p><p>Let&#x27;s dive into hooks, with a focus on useState and useEffect!</p><h2 id="1---usestate"><a href="#1---usestate" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1 - useState</h2><p>A first good point is: in controlled components value is changed/updated by the state and uncontrolled by event handlers.</p><p>The interesting part of useState is how under the hood is nothing else but an array declaration. When it&#x27;s used, it gets two elements of the array, in which the first is the variable and the second one is the function to update the variable.</p><p>So a code like this: <code>const [ count, setCount ] = useState(0)</code> would be, not destructured:</p><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">const</span> count <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token keyword">const</span> setCount <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</span></code></pre></div><p>The first exercise is quite simple if one understands React states well. Every time (unless different specified) the state changes, in any part of the component, there will be a re-render of the component virtual DOM, updating what appears on the page. If I call a function on the onChange in the input, and that function changes the state (<code>setCount(event.target.value)</code>), then I can call the updated state in any part of the render <code>{count ? &lt;strong&gt;Count is {count}&lt;/strong&gt; : &#x27;Add a number to count&#x27;}</code></p><p>In the second part the task would be to use a prop in the component as initial value to pass <code>&lt;Counting initialCount={0}</code> I find there are different ways. The best way is to setState to that initial value that is destructured in the function arguments:</p><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counting</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> initialCount <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span>
</span></code></pre></div><p>Destructuring is necessary because initialCount is an object so, if we&#x27;re passing the argument just like it (initialCount), the result will be [Object object]. The default value (= &#x27;&#x27;) is also necessary in case we don&#x27;t pass anything as a prop. In this case we don&#x27;t cause a crash because of undefined value (unless we use Typescript and we define it as possible undefined). So one way is to setState(initialCount) and value=count in the input.</p><p>Another possible way is to set the defaultValue of the input to the initialCount. This will have the same effect except that the state of the rendered text won&#x27;t be updated until something is typed. It&#x27;s possible to create a check to use the count (like a nested if but with ternary operator). However, it will make the code more difficult to read and follow in its flow.</p><h2 id="2---useeffect"><a href="#2---useeffect" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2 - useEffect</h2><p>This hook is called at every render of the component whenever its dependencies change. Or at any render if the dependency array is empty.</p><p>We can persist the state: call the localstorage methods inside useEffect (getter and/or setter) <code>const [name, setName] = React.useState(window.localStorage.getItem(&#x27;name&#x27;) || initialName)</code> However in doing so we can run into a performance issue. Access to localstorage is slower than other methods.</p><p>There are some workarounds for this:</p><ul><li>React’s useState hook allows you to pass a function instead of the actual value, and then it will only call that function to get the state value when the component is rendered the first time: <code>React.useState(() =&gt; someExpensiveComputation())</code> ... that&#x27;s the same as the callback on setState in class components <code>const [name, setName] = React.useState(() =&gt; window.localStorage.getItem(&#x27;name&#x27;) || initialName)</code> If we put a console inside the callback we cans see it&#x27;s called only on the first render. It should be used only for bottleneck functions that require sync time</li></ul><p>Or using useEffect:</p><ul><li>lazy initialization, or not reading from localStorage at every render.</li><li>dependency array: second argument on useEffect which signals to React that your effect callback function should be called when (and only when) those dependencies change:</li></ul><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access function method">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">setItem</span><span class="token punctuation">(</span><span class="token string">&#x27;count&#x27;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></code></pre></div><p>If other states apart from name change setItem won&#x27;t be called If left empty, it&#x27;ll be called only at the first render. The state in the dependency array is an object that is compared on the render with the previous state through object comparison. If they&#x27;re the same useEffect won&#x27;t run , otherwise yes.</p><p>Custom hooks. They are external functions called inside a method. Their names start with ”use”. If we have different functions inside the component method we can externalize those, even useEffect:</p><p>If we have a method like this:</p><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greeting</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> initialCount <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access function method">useState</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">getItem</span><span class="token punctuation">(</span><span class="token string">&#x27;count&#x27;</span><span class="token punctuation">)</span> <span class="token operator">||</span> initialCount<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access function method">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">setItem</span><span class="token punctuation">(</span><span class="token string">&#x27;count&#x27;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">setCount</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre></div><p>We can convert it to this and then use it in the main method as custom hook:</p><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">useLocalStorageWithState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access function method">useState</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">getItem</span><span class="token punctuation">(</span><span class="token string">&#x27;count&#x27;</span><span class="token punctuation">)</span> <span class="token operator">||</span> initialCount<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access function method">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">setItem</span><span class="token punctuation">(</span><span class="token string">&#x27;count&#x27;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Greeting</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> initialCount<span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useLocalStorageWithState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">setCount</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre></div><h2 id="other-notes"><a href="#other-notes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Other notes</h2><ul><li><p>Setting up a callback inside useState makes the setting of the state as lazy, as it compares the states and doesn&#x27;t change it if it&#x27;s the same.</p></li><li><p>If you ar getting an error that goes like: &#x27;React Hook ... is called in function ... which is neither a React function component or custom React Hook function&#x27;, then it&#x27;s possible that you put a wrong name to the custom hook. As a React convention, your function should start with &#x27;use&#x27; and probably is not. For example, useGetItems. So, instead of syncLocalStorageWithState, we call it useLocalStorageWithState.</p></li></ul><p>useLocalStorageWithState should have the same use as the useState hook, so it can return an array like useState, and we can store it in a similar array. So we have created a custom useState hook that does other stuff as well. We pass as well count and initialCount as parameters <code>useLocalStorageWithState(count, initialCount)</code> and then making useLocalStorageWithState more generic, receiving as arguments <code>key, defaultValue</code> , so the method can be reused freely and not stay chained to a count state. The same applies to the state. We can set [state, setState] and return the same. Having two arguments means that also useEffect should have two in the dependency array.</p><p>The logic of the flexible localStorage hook is the following:</p><ul><li>get the item from local storage</li><li>if present, JSON parse it and return the result</li><li>if not, return the default value</li></ul><p>That&#x27;s for getting the state. For setting the changes using useEffect -in this case for creating/editing the local storage- se can move forward like this: once the state changes we can just stringify whatever the state will be and store it. Serialize will be for stringify the JSON, while deserialize for parsing it.</p><p>In case as argument of useLocalStorageWithState, instead of a number, we&#x27;ll pass a function, it&#x27;s possible to create a check to return the results of another function. <code>const [name, setName] = useLocalStorageWithState(&#x27;name&#x27;, complexCounting() )</code> --&gt; pass a function as default value <code>return typeof defaultValue === &#x27;function&#x27; ? defaultValue() : defaultValue;</code> --&gt; return to useState the result of the method</p><p>Then it comes the complicated part. In the above case, we are passing two parameters to useLocalStorageWithState. The first one -the key- is a string and the second a primitive value or a method. What if somebody wants to pass another value to the &#x27;key&#x27;? Now, for example, can be passed &#x27;count&#x27; as string, but maybe somebody will want to pass something different (to store a different thing in local storage, for instance).</p><p>There&#x27;s no direct way to change the state of the key, so what could be done is storing the key into a variable that won&#x27;t trigger the render, using useRef. Following that, in useEffect we can compare the old key with the new one.</p><p>According to the docs:</p><blockquote><p>useRef returns a mutable ref object whose .current property is initialized to the passed argument (initialValue). The returned object will persist for the full lifetime of the component. Note that useRef() is useful for more than the ref attribute. It’s handy for keeping any mutable value around similar to how you’d use instance fields in classes.</p></blockquote><p>The difference with useState is then that useRef doesn&#x27;t trigger a rerender, so with this hook we can actually set the key without triggering the rerender. The purpose of this is clear in the useEffect</p><div class="relative"><pre><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">const</span> prevKey <span class="token operator">=</span> prevKeyRef<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>prevKey <span class="token operator">!==</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">localStorage</span><span class="token punctuation">.</span><span class="token property-access function method">removeItem</span><span class="token punctuation">(</span>prevKey<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span></code></pre></div><p>Usually we store in localStorage a value. But this value is in an object, and that object has a key. So for now it&#x27;s &#x27;count&#x27;. But if it will be &#x27;sum&#x27;, and we don&#x27;t remove the initial key, we&#x27;ll have two objects in localStorage. So if the new key and the old one, which is stored in the useRef var, is different, we will remove the object in localStorage with the old key.</p><p>Thank you for reading and let&#x27;s connect on <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/AlexBuaiscia">Twitter</a>!</p></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/react">react</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/web-development">web-development</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/epic-react">epic-react</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/career/what-learnt-in-first-six-months-self-taught-developer">What I learnt in my first six months as a working (self-taught) developer</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/career/how-passed-from-junior-to-intermediate-dev-one-year">How I passed from Junior to Intermediate developer in one year</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/buaiscia"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/alex-buaiscia/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/AlexBuaiscia"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-6 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Alex Buaiscia</div><div> • </div><div>© 2023</div><div> • </div><a href="/">Alex Buaiscia Blog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var o=a=\u003ec(a,\"__esModule\",{value:!0});var m=(a,t)=\u003e()=\u003e(t||a((t={exports:{}}).exports,t),t.exports),k=(a,t)=\u003e{o(a);for(var s in t)c(a,s,{get:t[s],enumerable:!0})},N=(a,t,s)=\u003e{if(t\u0026\u0026typeof t==\"object\"||typeof t==\"function\")for(let n of d(t))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003et[n],enumerable:!(s=h(t,n))||s.enumerable});return a},f=a=\u003eN(o(c(a!=null?r(p(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=m((S,i)=\u003e{i.exports=_jsx_runtime});var b={};k(b,{default:()=\u003ey,frontmatter:()=\u003eg});var e=f(l()),g={title:\"Epic React. Hooks. UseState, useEffect. What I'm learning.\",date:\"2021-11-01\",draft:!1,tags:[\"react\",\"web development\",\"epic react\"],summary:\"A guide of what I'm learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect\"};function w(a={}){let{wrapper:t}=a.components||{};return t?(0,e.jsx)(t,Object.assign({},a,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({ul:\"ul\",li:\"li\",a:\"a\",h2:\"h2\",span:\"span\",p:\"p\",code:\"code\",pre:\"pre\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#back-into-epic-react\",children:\"Back into Epic React\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#1---usestate\",children:\"1 - useState\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#2---useeffect\",children:\"2 - useEffect\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#other-notes\",children:\"Other notes\"})})]}),(0,e.jsxs)(n.h2,{id:\"back-into-epic-react\",children:[(0,e.jsx)(n.a,{href:\"#back-into-epic-react\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Back into Epic React\"]}),(0,e.jsx)(n.p,{children:\"After a long break and quite more experience, I managed to get back to EpicReact. This is the second chapter of the series. Here's the link to the first one:\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://buaiscia.github.io/blog/learning-on-epic-react-fundamentals\",children:\"Epic React. Fundamentals. What I'm learning.\"})}),(0,e.jsx)(n.p,{children:\"As in the other post, this isn't a guide to React nor to EpicReact. They are just my notes, thoughts and learning on the course workshops. Few things can appear as confusing for lack of context. However, I hope you can find some interesting points to reflect upon. Repositories and solutions are anyway publicly available on Kent's Github.\"}),(0,e.jsx)(n.p,{children:\"Let's dive into hooks, with a focus on useState and useEffect!\"}),(0,e.jsxs)(n.h2,{id:\"1---usestate\",children:[(0,e.jsx)(n.a,{href:\"#1---usestate\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1 - useState\"]}),(0,e.jsx)(n.p,{children:\"A first good point is: in controlled components value is changed/updated by the state and uncontrolled by event handlers.\"}),(0,e.jsx)(n.p,{children:\"The interesting part of useState is how under the hood is nothing else but an array declaration. When it's used, it gets two elements of the array, in which the first is the variable and the second one is the function to update the variable.\"}),(0,e.jsxs)(n.p,{children:[\"So a code like this: \",(0,e.jsx)(n.code,{children:\"const [ count, setCount ] = useState(0)\"}),\" would be, not destructured:\"]}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" array \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" count \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" array\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" setCount \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" array\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"The first exercise is quite simple if one understands React states well. Every time (unless different specified) the state changes, in any part of the component, there will be a re-render of the component virtual DOM, updating what appears on the page. If I call a function on the onChange in the input, and that function changes the state (\",(0,e.jsx)(n.code,{children:\"setCount(event.target.value)\"}),\"), then I can call the updated state in any part of the render \",(0,e.jsx)(n.code,{children:\"{count ? \u003cstrong\u003eCount is {count}\u003c/strong\u003e : 'Add a number to count'}\"})]}),(0,e.jsxs)(n.p,{children:[\"In the second part the task would be to use a prop in the component as initial value to pass \",(0,e.jsx)(n.code,{children:\"\u003cCounting initialCount={0}\"}),\" I find there are different ways. The best way is to setState to that initial value that is destructured in the function arguments:\"]}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsx)(n.code,{className:\"language-javascript code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Counting\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" initialCount \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,e.jsx)(n.p,{children:\"Destructuring is necessary because initialCount is an object so, if we're passing the argument just like it (initialCount), the result will be [Object object]. The default value (= '') is also necessary in case we don't pass anything as a prop. In this case we don't cause a crash because of undefined value (unless we use Typescript and we define it as possible undefined). So one way is to setState(initialCount) and value=count in the input.\"}),(0,e.jsx)(n.p,{children:\"Another possible way is to set the defaultValue of the input to the initialCount. This will have the same effect except that the state of the rendered text won't be updated until something is typed. It's possible to create a check to use the count (like a nested if but with ternary operator). However, it will make the code more difficult to read and follow in its flow.\"}),(0,e.jsxs)(n.h2,{id:\"2---useeffect\",children:[(0,e.jsx)(n.a,{href:\"#2---useeffect\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2 - useEffect\"]}),(0,e.jsx)(n.p,{children:\"This hook is called at every render of the component whenever its dependencies change. Or at any render if the dependency array is empty.\"}),(0,e.jsxs)(n.p,{children:[\"We can persist the state: call the localstorage methods inside useEffect (getter and/or setter) \",(0,e.jsx)(n.code,{children:\"const [name, setName] = React.useState(window.localStorage.getItem('name') || initialName)\"}),\" However in doing so we can run into a performance issue. Access to localstorage is slower than other methods.\"]}),(0,e.jsx)(n.p,{children:\"There are some workarounds for this:\"}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"React\\u2019s useState hook allows you to pass a function instead of the actual value, and then it will only call that function to get the state value when the component is rendered the first time: \",(0,e.jsx)(n.code,{children:\"React.useState(() =\u003e someExpensiveComputation())\"}),\" ... that's the same as the callback on setState in class components \",(0,e.jsx)(n.code,{children:\"const [name, setName] = React.useState(() =\u003e window.localStorage.getItem('name') || initialName)\"}),\" If we put a console inside the callback we cans see it's called only on the first render. It should be used only for bottleneck functions that require sync time\"]})}),(0,e.jsx)(n.p,{children:\"Or using useEffect:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"lazy initialization, or not reading from localStorage at every render.\"}),(0,e.jsx)(n.li,{children:\"dependency array: second argument on useEffect which signals to React that your effect callback function should be called when (and only when) those dependencies change:\"})]}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"setItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'count'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"If other states apart from name change setItem won't be called If left empty, it'll be called only at the first render. The state in the dependency array is an object that is compared on the render with the previous state through object comparison. If they're the same useEffect won't run , otherwise yes.\"}),(0,e.jsx)(n.p,{children:\"Custom hooks. They are external functions called inside a method. Their names start with \\u201Duse\\u201D. If we have different functions inside the component method we can externalize those, even useEffect:\"}),(0,e.jsx)(n.p,{children:\"If we have a method like this:\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Greeting\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" initialCount \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'count'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" initialCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"setItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'count'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handleChange\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"event\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCount\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"We can convert it to this and then use it in the main method as custom hook:\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useLocalStorageWithState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'count'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" initialCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"useEffect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"setItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'count'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Greeting\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" initialCount\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useLocalStorageWithState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handleChange\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"event\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCount\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"other-notes\",children:[(0,e.jsx)(n.a,{href:\"#other-notes\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Other notes\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"Setting up a callback inside useState makes the setting of the state as lazy, as it compares the states and doesn't change it if it's the same.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"If you ar getting an error that goes like: 'React Hook ... is called in function ... which is neither a React function component or custom React Hook function', then it's possible that you put a wrong name to the custom hook. As a React convention, your function should start with 'use' and probably is not. For example, useGetItems. So, instead of syncLocalStorageWithState, we call it useLocalStorageWithState.\"})})]}),(0,e.jsxs)(n.p,{children:[\"useLocalStorageWithState should have the same use as the useState hook, so it can return an array like useState, and we can store it in a similar array. So we have created a custom useState hook that does other stuff as well. We pass as well count and initialCount as parameters \",(0,e.jsx)(n.code,{children:\"useLocalStorageWithState(count, initialCount)\"}),\" and then making useLocalStorageWithState more generic, receiving as arguments \",(0,e.jsx)(n.code,{children:\"key, defaultValue\"}),\" , so the method can be reused freely and not stay chained to a count state. The same applies to the state. We can set [state, setState] and return the same. Having two arguments means that also useEffect should have two in the dependency array.\"]}),(0,e.jsx)(n.p,{children:\"The logic of the flexible localStorage hook is the following:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"get the item from local storage\"}),(0,e.jsx)(n.li,{children:\"if present, JSON parse it and return the result\"}),(0,e.jsx)(n.li,{children:\"if not, return the default value\"})]}),(0,e.jsx)(n.p,{children:\"That's for getting the state. For setting the changes using useEffect -in this case for creating/editing the local storage- se can move forward like this: once the state changes we can just stringify whatever the state will be and store it. Serialize will be for stringify the JSON, while deserialize for parsing it.\"}),(0,e.jsxs)(n.p,{children:[\"In case as argument of useLocalStorageWithState, instead of a number, we'll pass a function, it's possible to create a check to return the results of another function. \",(0,e.jsx)(n.code,{children:\"const [name, setName] = useLocalStorageWithState('name', complexCounting() )\"}),\" --\u003e pass a function as default value \",(0,e.jsx)(n.code,{children:\"return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\"}),\" --\u003e return to useState the result of the method\"]}),(0,e.jsx)(n.p,{children:\"Then it comes the complicated part. In the above case, we are passing two parameters to useLocalStorageWithState. The first one -the key- is a string and the second a primitive value or a method. What if somebody wants to pass another value to the 'key'? Now, for example, can be passed 'count' as string, but maybe somebody will want to pass something different (to store a different thing in local storage, for instance).\"}),(0,e.jsx)(n.p,{children:\"There's no direct way to change the state of the key, so what could be done is storing the key into a variable that won't trigger the render, using useRef. Following that, in useEffect we can compare the old key with the new one.\"}),(0,e.jsx)(n.p,{children:\"According to the docs:\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"useRef returns a mutable ref object whose .current property is initialized to the passed argument (initialValue). The returned object will persist for the full lifetime of the component. Note that useRef() is useful for more than the ref attribute. It\\u2019s handy for keeping any mutable value around similar to how you\\u2019d use instance fields in classes.\"})}),(0,e.jsx)(n.p,{children:\"The difference with useState is then that useRef doesn't trigger a rerender, so with this hook we can actually set the key without triggering the rerender. The purpose of this is clear in the useEffect\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" prevKey \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" prevKeyRef\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"current\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"prevKey \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!==\"}),\" key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"window\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"localStorage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"removeItem\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"prevKey\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Usually we store in localStorage a value. But this value is in an object, and that object has a key. So for now it's 'count'. But if it will be 'sum', and we don't remove the initial key, we'll have two objects in localStorage. So if the new key and the old one, which is stored in the useRef var, is different, we will remove the object in localStorage with the old key.\"}),(0,e.jsxs)(n.p,{children:[\"Thank you for reading and let's connect on \",(0,e.jsx)(n.a,{href:\"https://twitter.com/AlexBuaiscia\",children:\"Twitter\"}),\"!\"]})]})}}var y=w;return b;})();\n;return Component;","toc":[{"value":"Back into Epic React","url":"#back-into-epic-react","depth":2},{"value":"1 - useState","url":"#1---usestate","depth":2},{"value":"2 - useEffect","url":"#2---useeffect","depth":2},{"value":"Other notes","url":"#other-notes","depth":2}],"frontMatter":{"readingTime":{"text":"10 min read","minutes":9.23,"time":553800,"words":1846},"slug":"epic-react/learning-on-epic-react-hooks-useState-useEffect","fileName":"epic-react/learning-on-epic-react-hooks-useState-useEffect.md","title":"Epic React. Hooks. UseState, useEffect. What I'm learning.","date":"2021-11-01T00:00:00.000Z","draft":false,"tags":["react","web development","epic react"],"summary":"A guide of what I'm learning on the Epic React workshops by Kent Dodds. This is the second one: useState + useEffect"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.94,"time":56400,"words":188},"slug":["default"],"fileName":"default.md","name":"Alex Buaiscia","avatar":"/static/images/avatar.png","occupation":"Full-stack Software Developer","company":"Moravio","twitter":"https://twitter.com/AlexBuaiscia","linkedin":"https://www.linkedin.com/in/alex-buaiscia/","github":"https://github.com/buaiscia","date":null}],"prev":{"title":"What I learnt in my first six months as a working (self-taught) developer","date":"2021-07-06T00:00:00.000Z","template":"post","draft":false,"tags":["insights","career"],"summary":"The first six months of a developer are maybe the most challenging. This is what I learnt. My mistakes and accomplishments, to become a better dev","slug":"career/what-learnt-in-first-six-months-self-taught-developer"},"next":{"title":"How I passed from Junior to Intermediate developer in one year","date":"2021-12-15T00:00:00.000Z","draft":false,"tags":["insights","career"],"summary":"Learning from going above junior is not easy. This is why I think I did it and what I could learn in this passage","slug":"career/how-passed-from-junior-to-intermediate-dev-one-year"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["epic-react","learning-on-epic-react-hooks-useState-useEffect"]},"buildId":"XStNGs_bMW2Rssr3AyI-b","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
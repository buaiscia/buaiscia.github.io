<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="next-head-count" content="3"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/7288f585d6b9ed7d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7288f585d6b9ed7d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-a5b8b3492b8ffdaf.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0a44b73e58ab4cb8.js" defer=""></script><script src="/_next/static/chunks/675-4efee9c9b489918b.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-870525155e7082cc.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/AcPDH-LMBoOzHw_EMWmkm/_buildManifest.js" defer=""></script><script src="/_next/static/AcPDH-LMBoOzHw_EMWmkm/_ssgManifest.js" defer=""></script><script src="/_next/static/AcPDH-LMBoOzHw_EMWmkm/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Alex Buaiscia Tech Blog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-3 -2.75 6.5 6" xml:space="preserve"><path class="logo_svg__path" fill="none" stroke="#0EA5E9" stroke-width="0.1" stroke-miterlimit="10" d="M0 0c.043 0 .082-.035.088-.088C.095-.145.064-.209 0-.25a.29.29 0 0 0-.265-.015A.42.42 0 0 0-.5 0a.547.547 0 0 0 .058.442c.091.153.25.267.442.308A.8.8 0 0 0 .619.619C.819.48.959.258 1 0a1.05 1.05 0 0 0-.205-.795A1.171 1.171 0 0 0 0-1.25a1.305 1.305 0 0 0-.972.278A1.428 1.428 0 0 0-1.5 0c-.043.406.081.821.351 1.149.28.341.693.56 1.149.601a1.81 1.81 0 0 0 1.326-.424C1.713.999 1.958.522 2 0a2.06 2.06 0 0 0-.497-1.503A2.186 2.186 0 0 0 0-2.25a2.302 2.302 0 0 0-1.679.571A2.43 2.43 0 0 0-2.5 0c-.043.671.187 1.34.644 1.856A2.686 2.686 0 0 0 0 2.75a2.807 2.807 0 0 0 2.033-.717A2.934 2.934 0 0 0 3 0"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Alex Buaiscia Tech Blog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">Who&#x27;s me</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">Who&#x27;s me</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mt-24 text-center"><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Under Construction<!-- --> <span role="img" aria-label="roadwork sign">ðŸš§</span></h1></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/buaiscia"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/alex-buaiscia/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/AlexBuaiscia"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-6 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Alex Buaiscia</div><div> â€¢ </div><div>Â© 2022</div><div> â€¢ </div><a href="/">Alex Buaiscia Blog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var o=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var s=i=\u003eo(i,\"__esModule\",{value:!0});var u=(i,t)=\u003e()=\u003e(t||i((t={exports:{}}).exports,t),t.exports),g=(i,t)=\u003e{s(i);for(var a in t)o(i,a,{get:t[a],enumerable:!0})},w=(i,t,a)=\u003e{if(t\u0026\u0026typeof t==\"object\"||typeof t==\"function\")for(let n of d(t))!m.call(i,n)\u0026\u0026n!==\"default\"\u0026\u0026o(i,n,{get:()=\u003et[n],enumerable:!(a=h(t,n))||a.enumerable});return i},f=i=\u003ew(s(o(i!=null?r(p(i)):{},\"default\",i\u0026\u0026i.__esModule\u0026\u0026\"default\"in i?{get:()=\u003ei.default,enumerable:!0}:{value:i,enumerable:!0})),i);var l=u((C,c)=\u003e{c.exports=_jsx_runtime});var b={};g(b,{default:()=\u003eN,frontmatter:()=\u003ev});var e=f(l()),v={title:\"Epic React. Performance.\",date:\"2022-03-01\",draft:!0,tags:[\"react\",\"web development\",\"epic react\"],summary:\"test\"};function k(i={}){let{wrapper:t}=i.components||{};return t?(0,e.jsx)(t,Object.assign({},i,{children:(0,e.jsx)(a,{})})):a();function a(){let n=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",p:\"p\",pre:\"pre\",code:\"code\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h3,{id:\"code-splitting\",children:[(0,e.jsx)(n.a,{href:\"#code-splitting\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Code splitting\"]}),(0,e.jsx)(n.p,{children:\"Code splitting is a technique that allows code to be used only on need-basis, through lazy loading of that code. It shows like this in Javascript:\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`import('/some-module.js').then(\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  module =\u003e {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    // do stuff with the module's exports\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  },\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  error =\u003e {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    // there was some error loading the module...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  },\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`)\n`})]})}),(0,e.jsx)(n.p,{children:\"In React it's taken a step further using the React.Suspense component for the fallback meanwhile the user wait for its loading. The import is done by React.lazy. The component to be imported must have a default export.\"}),(0,e.jsx)(n.p,{children:\"That's how it's working. Having this code:\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`import HeavyComponent from '../heavycomponent'\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cdiv\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003cHeavyComponent /\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003c/div\u003e\n`})]})}),(0,e.jsx)(n.p,{children:\"will load the component right away in the application. Let's transform it to use it as code splitted.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`const HeavyComponent = React.lazy(() =\u003e import('../heavycomponent'))\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cdiv\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003cReact.Suspense fallback={\u003cdiv\u003eloading...\u003c/div\u003e}\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \u003cHeavyComponent /\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003c/React.Suspense\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003c/div\u003e\n`})]})}),(0,e.jsx)(n.p,{children:\"with the first code and an artificial slow 3G connection, the page was loading in 14 seconds. With lazy loading, between 6 and 8 seconds. A 50% gain.\"}),(0,e.jsx)(n.p,{children:\"In addition to that, we can start loading the heavy component before the user actually wants to see it. We can add some listener like mouseOver or mouseEnter, or onFocus, to start lazily loading the component without showing it.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`const loadHeavyComponent = () =\u003e import('../heavycomponent')\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cdiv\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003clabel of any kind\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    onMouseEnter={loadHeavyComponent}\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    onFocus={loadHeavyComponent}\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003cinput of any kind\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003c/div\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cdiv\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003cReact.Suspense fallback={\u003cdiv\u003eloading...\u003c/div\u003e}\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    \u003cHeavyComponent /\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \u003c/React.Suspense\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003c/div\u003e\n`})]})}),(0,e.jsx)(n.p,{children:\"There is a way as well to pre-fetch the chunks by webpack, once the main component has loaded: webpack magic comments.\"}),(0,e.jsx)(n.p,{children:\"One that is presented is just for this, using the code above:\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`const loadHeavyComponent = () =\u003e import(/* webpackPrefetch: true */ '../heavycomponent')\n`})})}),(0,e.jsx)(n.p,{children:\"This will appear in the browser DOM, through Webpack, as\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003clink rel=\"prefetch\" as=\"script\" href=\"/static/js/1.f2976096.chunk.js\"\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003clink rel=\"prefetch\" as=\"script\" href=\"/static/js/2.a7113cc3.chunk.js\"\u003e\n`})]})}),(0,e.jsx)(n.p,{children:\"Another magic comment is webpackChunkName, which can be used for both placing common modules in the same chunk, and giving the chunk a name.\"}),(0,e.jsxs)(n.p,{children:[\"More info could be found here: \",(0,e.jsx)(n.a,{href:\"https://webpack.js.org/api/module-methods/#magic-comments\",children:\"https://webpack.js.org/api/module-methods/#magic-comments\"})]}),(0,e.jsx)(n.p,{children:\"Note: suspension is good to be put outside of conditions as its components will be loaded when the HeavyComponent will be showing up, if inside, creating a problem with the new Concurrency methods.\"}),(0,e.jsx)(n.p,{children:\"To check the suspension in the devtools, there's this little icon that anytime can be clicked and the component will go into the fallback.\"}),(0,e.jsx)(n.p,{children:\"An interesting tool about checking performance is the Coverage devtool. If we check the initial version of the code (without lazy loading) and the final version (without prefetch), the final has not only a lot fewer chunk files and less Kbs loaded, but also the final version has less Kb ran comparing to the initial one. It's like 20% less heavy and around 30% less code run.\"}),(0,e.jsx)(n.p,{children:\"In the coverage tool, in Usage Visualization, we can check how much of code is not used on the run. Even in the final version is more than 50%. This information can be used to check what to do more as code splitting. Clicking on it will show the file on the source tab, with lines that are run and lines that aren't.\"}),(0,e.jsxs)(n.h3,{id:\"usememo\",children:[(0,e.jsx)(n.a,{href:\"#usememo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"useMemo\"]}),(0,e.jsx)(n.p,{children:\"React useMemo is well known in the React world, but as I could see in some professional projects I worked on, sometimes it's abused in its use.\"}),(0,e.jsx)(n.p,{children:\"One good thing about this workshop is showing how to use the Performance devtool, and analyzing the difference in a heavy-calculation method before the use of useMemo and after. The recording of the performance is a simple operation, but one can get lost in the data. Where there are performance bottlenecks, a rose-red line will appear on top of the graph. Selecting that part, and using the Main section of the graph below, it's possible to encounter down below the method/methods and their children that are slowing down the application. And also what kind of activity the method is doing taking long time.\"}),(0,e.jsx)(n.p,{children:\"The most interesting topic on this part of the workshop is the part building a web worker. As we have our method that needs to do an expensive calculation, even crunching the best optimization is creating anyway a little bottleneck there. As JavaScript is single threaded, a solution could consist in creating a web worker, because it will work as a separate thread. In that case, the calculation can be done in the worker and sent back to the application once it's done, not blocking the rest of it.\"}),(0,e.jsx)(n.p,{children:\"In order to do so, we can load that component with the calculation via the worker. Using webpack, there's a shortcut: adding 'workerize!' in the string of the import will automatically create it as a method, which we can then export.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`import makeFilterCitiesWorker from 'workerize!./filter-cities'\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`const {getItems} = makeFilterCitiesWorker()\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`export {getItems}\n`})]})}),(0,e.jsx)(n.p,{children:\"After that, the only difference in its implementation is that the data is async and not sync anymore, so there's some work to do in the application to make it so. With this specification, even in developer mode, the click method resolved in 20 ms instead of the previous 50ms in production mode.\"}),(0,e.jsxs)(n.h3,{id:\"react-memo\",children:[(0,e.jsx)(n.a,{href:\"#react-memo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React memo\"]}),(0,e.jsx)(n.p,{children:\"There are cases in which some components are re-rendered although it's not necessary just because they're dependent on the parent component, so whenever this one re-renders, also the child component does unnecessarily, as no DOM updates were needed.\"}),(0,e.jsx)(n.p,{children:'This can be checked in the Profiler section of the Devtools, with the option \" Record why each component rendered while profiling.\" checked (in settings). Once profiling, we can make our actions on the page and once stopped recording, we can see what/when/why components rendered. The suspicious ones are the ones rerendered because the parent component rendered again. These have to be double-checked in case there is a useless rerender.'}),(0,e.jsx)(n.p,{children:\"In order to use it, we can have the normal method and then reassign the method with the memoization. Supposing that we have a method\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`function ListCities() {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  ...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`}\n`})]})}),(0,e.jsx)(n.p,{children:\"then we can memoize it just like this.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`ListCities = React.memo(ListCities)\n`})})}),(0,e.jsx)(n.p,{children:\"At this moment we reduced the render to only the component that is changing props or state. However there could be the case in which, under that component, there's some method that is triggering the re-rendering again for everything. We can avoid that using the condition of React memo, in the second argument as a callback returning a boolean. If it's false, it will rerender; if true, it won't.\"}),(0,e.jsx)(n.p,{children:\"We take from the callback two arguments, previous and next props (like in many React hooks), and we can check whether the prevProp is the same or it has changed comparing to the next one. We can give multiple conditions, one for each prop, with multiple if statements.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`ListCities = React.memo(ListCities, (prevProps, nextProps) =\u003e {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  if (prevProps.getCitiesProps !== nextProps.getCitiesProps) return false\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  if (prevProps.getCitiesProps2 !== nextProps.getCitiesProps2) return false\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  if (prevProps.index !== nextProps.index) return false\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  return true\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`})\n`})]})}),(0,e.jsx)(n.p,{children:\"Eventually the best way to do it, if we're going to use calculation that updates specific props in the component, is to move those props a little higher in the tree. So, instead of having ListCities with the calculations, we can move them in the parent component and passed those down below as props or primitive values. This way, when memo is called, it'll do an automatic comparison and update only what is necessary to update. And then call the component with memo without other options:\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`ListCities = React.memo(ListCities)\n`})})}),(0,e.jsxs)(n.h3,{id:\"react-virtual\",children:[(0,e.jsx)(n.a,{href:\"#react-virtual\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React Virtual\"]})]})}}var N=k;return b;})();\n;return Component;","toc":[{"value":"Code splitting","url":"#code-splitting","depth":3},{"value":"useMemo","url":"#usememo","depth":3},{"value":"React memo","url":"#react-memo","depth":3},{"value":"React Virtual","url":"#react-virtual","depth":3}],"frontMatter":{"readingTime":{"text":"7 min read","minutes":6.285,"time":377100,"words":1257},"slug":"learning-on-epic-react-performance","fileName":"learning-on-epic-react-performance.md","title":"Epic React. Performance.","date":"2022-03-01T00:00:00.000Z","draft":true,"tags":["react","web development","epic react"],"summary":"test"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.94,"time":56400,"words":188},"slug":["default"],"fileName":"default.md","name":"Alex Buaiscia","avatar":"/static/images/avatar.png","occupation":"Full-stack Software Developer","company":"Moravio","twitter":"https://twitter.com/AlexBuaiscia","linkedin":"https://www.linkedin.com/in/alex-buaiscia/","github":"https://github.com/buaiscia","date":null}],"prev":{"title":"Finding a bug after writing a test, an example","date":"2022-11-30T00:00:00.000Z","draft":false,"tags":["web development","react","testing"],"summary":"I wrote a test and found a small bug. Even in React writing tests is important","slug":"tips/finding-bug-writing-tests-example"},"next":null},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["learning-on-epic-react-performance"]},"buildId":"AcPDH-LMBoOzHw_EMWmkm","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>